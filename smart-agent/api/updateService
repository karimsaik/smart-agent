var directory = require("smart-agent/services/directory");
var log = require("log");
log.setLevel("info");

try{
    var dir = new directory.Directory();
    var body = request.body;
    
    if(!body.descriptor){
        if(body.msgType == "update"){
            dir.updateService(body.payLoad);
            return;
        }
        return;
    }
    
    dir.updateService(body.descriptor);
}catch(exception) {
    
    return exception;
}