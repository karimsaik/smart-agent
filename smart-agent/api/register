var directory = require("smart-agent/services/directory");
var log = require("log");
log.setLevel("info");

try{
	var dir = new directory.Directory();
    var body = request.body;
    
    if(!body.descriptor){
        if(body.msgType == "new"){
            dir.register(body.payLoad);
            return;
        }
        return;
    }
    
    dir.register(body.descriptor);
}catch(exception) {

    return exception;
}